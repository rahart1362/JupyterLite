"use strict";(self.webpackChunk_anaconda_core=self.webpackChunk_anaconda_core||[]).push([[422],{929:(e,t,n)=>{n.d(t,{fy:()=>sr});var r={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},o=console,i={};Object.keys(r).forEach((function(e){i[e]=o[e]}));var a="Datadog Browser SDK:",s={debug:i.debug.bind(o,a),log:i.log.bind(o,a),info:i.info.bind(o,a),warn:i.warn.bind(o,a),error:i.error.bind(o,a)};function c(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){s.error(t,e)}}}var u,l=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},f=!1;function d(e){f=e}function p(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(u?v(r):r).apply(this,e)}}function v(e){return function(){return g(e,this,arguments)}}function g(e,t,n){try{return e.apply(t,n)}catch(e){if(h(e),u)try{u(e)}catch(e){h(e)}}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f&&s.error.apply(s,l(["[MONITOR]"],e,!1))}function m(e,t){return-1!==e.indexOf(t)}function y(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){return t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function b(e){return Object.keys(e).map((function(t){return e[t]}))}function w(e,t){return e.slice(0,t.length)===t}function E(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function k(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}var S=1024,C=1024*S,x=/[^\u0000-\u007F]/;function O(e){return x.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function T(e,t){var n,r=k();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function R(e,t){return T(k(),"setTimeout")(v(e),t)}function L(e){T(k(),"clearTimeout")(e)}function P(e,t){return T(k(),"setInterval")(v(e),t)}function D(e){T(k(),"clearInterval")(e)}function _(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1;return{throttled:function(){for(var n=[],c=0;c<arguments.length;c++)n[c]=arguments[c];s?r=n:(i?e.apply(void 0,n):r=n,s=!0,o=R((function(){a&&r&&e.apply(void 0,r),s=!1,r=void 0}),t))},cancel:function(){L(o),s=!1,r=void 0}}}function I(){}function A(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function U(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=U(o[i],t[i],n);return o}var a="object"===A(e)?e:{};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=U(a[s],t[s],n));return a}}function j(e){return U(void 0,e)}function N(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];null!=i&&(e=U(e,i))}return e}function F(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=M(Object.prototype),o=M(Array.prototype),i=M(Object.getPrototypeOf(e)),a=M(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function M(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):I}var q=220*S,B="$",H=3;function V(e,t){var n;void 0===t&&(t=q);var r=M(Object.prototype),o=M(Array.prototype),i=[],a=new WeakMap,s=G(e,B,void 0,i,a),c=(null===(n=JSON.stringify(s))||void 0===n?void 0:n.length)||0;if(!(c>t)){for(;i.length>0&&c<t;){var u=i.shift(),l=0;if(Array.isArray(u.source))for(var f=0;f<u.source.length;f++){if(c+=void 0!==(d=G(u.source[f],u.path,f,i,a))?JSON.stringify(d).length:4,c+=l,l=1,c>t){$(t,"truncated",e);break}u.target[f]=d}else for(var f in u.source)if(Object.prototype.hasOwnProperty.call(u.source,f)){var d;if(void 0!==(d=G(u.source[f],u.path,f,i,a))&&(c+=JSON.stringify(d).length+l+f.length+H,l=1),c>t){$(t,"truncated",e);break}u.target[f]=d}}return r(),o(),s}$(t,"discarded",e)}function G(e,t,n,r,o){var i,a=function(e){var t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(e);if(!a||"object"!=typeof a)return"bigint"==typeof(i=a)?"[BigInt] ".concat(i.toString()):"function"==typeof i?"[Function] ".concat(i.name||"unknown"):"symbol"==typeof i?"[Symbol] ".concat(i.description||i.toString()):i;var s=function(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"}(a);if("[Object]"!==s&&"[Array]"!==s&&"[Error]"!==s)return s;var c=e;if(o.has(c))return"[Reference seen at ".concat(o.get(c),"]");var u=void 0!==n?"".concat(t,".").concat(n):t,l=Array.isArray(a)?[]:{};return o.set(c,u),r.push({source:a,target:l,path:u}),l}function $(e,t,n){s.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var z,J=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new J((function(){var t=e.map((function(e){return e.subscribe((function(e){return n.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return n}var W=3*S,X=((z={})[0]="feature flag evaluation",z[1]="user",z[2]="global context",z[3]="logger context",z),Z=200;function Y(e,t){void 0===t&&(t=O);var n,r={},o=!1,i=new J,a=_((function(r){n=t(F(r)),o||(o=function(e,t){return e>W&&(s.warn("The ".concat(X[t]," data exceeds the recommended ").concat(W/S,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0)}(n,e))}),Z).throttled,c={getBytesCount:function(){return n},get:function(){return r},add:function(e,t){r[e]=t,a(r),i.notify()},remove:function(e){delete r[e],a(r),i.notify()},set:function(e){a(r=e),i.notify()},getContext:function(){return j(r)},setContext:function(e){"object"===A(e)?(r=V(e),a(r)):c.clearContext(),i.notify()},setContextProperty:function(e,t){r[e]=V(t),a(r),i.notify()},removeContextProperty:function(e){delete r[e],a(r),i.notify()},clearContext:function(){r={},n=0,i.notify()},changeObservable:i};return c}var Q,ee=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}(),te=1e3,ne=60*te,re=60*ne;function oe(){return(new Date).getTime()}function ie(){return oe()}function ae(){return performance.now()}function se(){return{relative:ae(),timeStamp:ie()}}function ce(){return void 0===Q&&(Q=performance.timing.navigationStart),Q}function ue(){var e=k().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function le(e){var t;void 0===e&&(e=null===(t=k().location)||void 0===t?void 0:t.hostname);var n=ue();return!!n&&n.getAllowedWebViewHosts().some((function(t){return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r);var n,r}))}function fe(e,t,n,r,o){return de(0,t,[n],r,o)}function de(e,t,n,r,o){var i=void 0===o?{}:o,a=i.once,s=i.capture,c=i.passive,u=v(a?function(e){d(),r(e)}:r),l=c?{capture:s,passive:c}:s,f=T(t,"addEventListener");function d(){var e=T(t,"removeEventListener");n.forEach((function(n){return e.call(t,n,u,l)}))}return n.forEach((function(e){return f.call(t,e,u,l)})),{stop:d}}var pe,ve=[];function ge(e,t,n,r){void 0===r&&(r=O);var o=function(e,t){return"".concat("_dd_c","_").concat(e,"_").concat(t)}(t,n),i=Y(n,r);return a(),ve.push(fe(0,window,"storage",(function(e){var t=e.key;o===t&&a()}))),i.changeObservable.subscribe((function(){localStorage.setItem(o,JSON.stringify(i.getContext()))})),i;function a(){var e=localStorage.getItem(o),t=null!==e?JSON.parse(e):{};i.setContext(t)}}function he(e){var t=E({},e);return["id","name","email"].forEach((function(e){e in t&&(t[e]=String(t[e]))})),t}!function(e){e.PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.PAGE_STATES="page_states",e.COLLECT_FLUSH_REASON="collect_flush_reason",e.NO_RESOURCE_DURATION_FROZEN_STATE="no_resource_duration_frozen_state",e.SCROLLMAP="scrollmap",e.INTERACTION_TO_NEXT_PAINT="interaction_to_next_paint",e.WEB_VITALS_ATTRIBUTION="web_vitals_attribution",e.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css"}(pe||(pe={}));var me=new Set;function ye(e){return me.has(e)}function be(e){return 0!==e&&100*Math.random()<=e}function we(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function Ee(e){return 0===Object.keys(e).length}function ke(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,ke)}function Se(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)}var Ce,xe,Oe=4*re,Te=15*ne;function Re(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(s).concat(c)}function Le(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}(document.cookie,e)}function Pe(e,t){Re(e,"",0,t)}var De="_dd_s",_e=/^([a-z]+)=([a-z0-9-]+)$/,Ie="&";function Ae(e){return Ee(e)}function Ue(e){e.expire=String(oe()+Te)}function je(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join(Ie);var t}function Ne(e){var t={};return function(e){return!!e&&(-1!==e.indexOf(Ie)||_e.test(e))}(e)&&e.split(Ie).forEach((function(e){var n=_e.exec(e);if(null!==n){var r=n[1],o=n[2];t[r]=o}})),t}var Fe="_dd",Me="_dd_r",qe="_dd_l",Be="rum",He="logs";function Ve(){return Ne(Le(De))}function Ge(e){return function(){Pe(De,e)}}var $e="_dd_test_";function ze(e){localStorage.setItem(De,je(e))}function Je(){return Ne(localStorage.getItem(De))}function Ke(){localStorage.removeItem(De)}var We,Xe=10,Ze=100,Ye=[];function Qe(e,t,n){var r;void 0===n&&(n=0);var o=t.isLockEnabled,i=t.retrieveSession,a=t.persistSession,s=t.clearSession;if(We||(We=e),e===We)if(o&&n>=Ze)tt(t);else{var c,u=i();if(o){if(u.lock)return void et(e,t,n);if(c=ke(),u.lock=c,a(u),(u=i()).lock!==c)return void et(e,t,n)}var l=e.process(u);if(o&&(u=i()).lock!==c)et(e,t,n);else{if(l&&(Ae(l)?s():(Ue(l),a(l))),o&&(!l||!Ae(l))){if((u=i()).lock!==c)return void et(e,t,n);delete u.lock,a(u),l=u}null===(r=e.after)||void 0===r||r.call(e,l||u),tt(t)}}else Ye.push(e)}function et(e,t,n){R((function(){Qe(e,t,n+1)}),Xe)}function tt(e){We=void 0;var t=Ye.shift();t&&Qe(t,e)}var nt=te;function rt(e){var t=function(e){var t=function(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===xe){for(var e="dd_site_test_".concat(ke()),t=window.location.hostname.split("."),n=t.pop();t.length&&!Le(e);)n="".concat(t.pop(),".").concat(n),Re(e,"test",te,{domain:n});Pe(e,{domain:n}),xe=n}return xe}()),t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(ke()),n="test";Re(t,n,ne,e);var r=Le(t)===n;return Pe(t,e),r}catch(e){return s.error(e),!1}}(t)?{type:"Cookie",cookieOptions:t}:void 0}(e);return!t&&e.allowFallbackToLocalStorage&&(t=function(){try{var e=ke(),t="".concat($e).concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch(e){return}}()),t}function ot(e,t,n){var r,o,i,a,s=new J,c=new J,u="Cookie"===e.type?(o=e.cookieOptions,a={isLockEnabled:null!=Ce?Ce:Ce=!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent),persistSession:(i=o,function(e){Re(De,je(e),Te,i)}),retrieveSession:Ve,clearSession:Ge(o)},function(e){if(!Le(De)){var t=Le(Fe),n=Le(Me),r=Le(qe),o={};t&&(o.id=t),r&&/^[01]$/.test(r)&&(o[He]=r),n&&/^[012]$/.test(n)&&(o[Be]=n),Ae(o)||(Ue(o),e.persistSession(o))}}(a),a):{isLockEnabled:!1,persistSession:ze,retrieveSession:Je,clearSession:Ke},l=u.clearSession,f=u.retrieveSession,d=P((function(){Qe({process:function(e){return h(e)?void 0:{}},after:v},u)}),nt),p=h(r=f())?r:{};function v(e){return h(e)||(e={}),g()&&(function(e){return p.id!==e.id||p[t]!==e[t]}(e)?(p={},c.notify()):p=e),e}function g(){return void 0!==p[t]}function h(e){return(void 0===e.created||oe()-Number(e.created)<Oe)&&(void 0===e.expire||oe()<Number(e.expire))}return{expandOrRenewSession:_((function(){var e;Qe({process:function(r){var o=v(r);return e=function(e){var r=n(e[t]),o=r.trackingType,i=r.isTracked;return e[t]=o,i&&!e.id&&(e.id=ke(),e.created=String(oe())),i}(o),o},after:function(t){e&&!g()&&function(e){p=e,s.notify()}(t),p=t}},u)}),nt).throttled,expandSession:function(){Qe({process:function(e){return g()?v(e):void 0}},u)},getSession:function(){return p},renewObservable:s,expireObservable:c,expire:function(){l(),v({})},stop:function(){D(d)}}}function it(e){return function(e,t){var n=function(){if(void 0===at)try{var e=new st("http://test/path");at="http://test/path"===e.href}catch(e){at=!1}return at?st:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw new Error("Failed to construct URL: ".concat(String(n)," ").concat(F({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,o=r.createElement("a");if(void 0!==t){var i=(r=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(o)}return o.href=e,o}(e,function(e){if(e.origin&&"null"!==e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}var at,st=URL;var ct="datad0g.com",ut="datadoghq.com",lt="ap1.datadoghq.com",ft={logs:"logs",rum:"rum",sessionReplay:"session-replay"},dt={logs:"logs",rum:"rum",sessionReplay:"replay"};function pt(e,t,n){var r=function(e,t){var n="/api/v2/".concat(dt[t]),r=e.proxy,o=e.proxyUrl;if(r){var i=it(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}var a=function(e,t){var n=e.site,r=void 0===n?ut:n,o=e.internalAnalyticsSubdomain;if(o&&r===ut)return"".concat(o,".").concat(ut);var i=r.split("."),a=i.pop(),s=r!==lt?"".concat(ft[t],"."):"";return"".concat(s,"browser-intake-").concat(i.join("-"),".").concat(a)}(e,t);if(void 0===r&&o){var s=it(o);return function(e){return"".concat(s,"?ddforward=").concat(encodeURIComponent("https://".concat(a).concat(n,"?").concat(e)))}}return function(e){return"https://".concat(a).concat(n,"?").concat(e)}}(e,t);return{build:function(o,i){var a=function(e,t,n,r,o){var i=e.clientToken,a=e.internalAnalyticsSubdomain,s=o.retry,c=o.flushReason,u=o.encoding,l=["sdk_version:".concat("4.50.1"),"api:".concat(r)].concat(n);c&&ye(pe.COLLECT_FLUSH_REASON)&&l.push("flush_reason:".concat(c)),s&&l.push("retry_count:".concat(s.count),"retry_after:".concat(s.lastFailureStatus));var f=["ddsource=browser","ddtags=".concat(encodeURIComponent(l.join(","))),"dd-api-key=".concat(i),"dd-evp-origin-version=".concat(encodeURIComponent("4.50.1")),"dd-evp-origin=browser","dd-request-id=".concat(ke())];return u&&f.push("dd-evp-encoding=".concat(u)),"rum"===t&&f.push("batch_time=".concat(ie())),a&&f.reverse(),f.join("&")}(e,t,n,o,i);return r(a)},urlPrefix:r(""),endpointType:t}}var vt=200,gt=/[^a-z0-9_:./-]/;function ht(e,t){var n=vt-e.length-1;(t.length>n||gt.test(t))&&s.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function mt(e){var t,n,r;if(e&&e.clientToken){var o=null!==(t=e.sessionSampleRate)&&void 0!==t?t:e.sampleRate;if(void 0===o||we(o))if(void 0===e.telemetrySampleRate||we(e.telemetrySampleRate)){if(void 0===e.telemetryConfigurationSampleRate||we(e.telemetryConfigurationSampleRate))return Array.isArray(e.enableExperimentalFeatures)&&e.enableExperimentalFeatures.filter((function(e){return t=pe,n=e,Object.keys(t).some((function(e){return t[e]===n}));var t,n})).forEach((function(e){me.add(e)})),E({beforeSend:e.beforeSend&&c(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:rt(e),sessionSampleRate:null!=o?o:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=e.telemetryConfigurationSampleRate)&&void 0!==r?r:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16*S,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*te,batchMessagesLimit:50,messageBytesLimit:256*S},function(e){var t=function(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(ht("env",t)),n&&i.push(ht("service",n)),r&&i.push(ht("version",r)),o&&i.push(ht("datacenter",o)),i}(e),n=function(e,t){return{logsEndpointBuilder:pt(e,"logs",t),rumEndpointBuilder:pt(e,"rum",t),sessionReplayEndpointBuilder:pt(e,"sessionReplay",t)}}(e,t),r=b(n).map((function(e){return e.urlPrefix})),o=function(e,t,n){if(e.replica){var r=E({},e,{site:ut,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:pt(r,"logs",n),rumEndpointBuilder:pt(r,"rum",n)};return t.push.apply(t,b(o).map((function(e){return e.urlPrefix}))),E({applicationId:e.replica.applicationId},o)}}(e,r,t);return E({isIntakeUrl:function(e){return r.some((function(t){return 0===e.indexOf(t)}))},replica:o,site:e.site||ut},n)}(e));s.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else s.error("Telemetry Sample Rate should be a number between 0 and 100");else s.error("Session Sample Rate should be a number between 0 and 100")}else s.error("Client Token is not configured, we will not send any data.")}var yt="?";function bt(e){var t=[],n=Rt(e,"stack"),r=String(e);return n&&w(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(e){var n=function(e){var t=kt.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=St.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||yt,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=Ct.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:yt,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=xt.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||yt,line:+t[3],url:t[2]}}(e)||function(e){var t=Ot.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=Tt.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||yt,line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func=yt),t.push(n))})),{message:Rt(e,"message"),name:Rt(e,"name"),stack:t}}var wt="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Et="(?::(\\d+))",kt=new RegExp("^\\s*at (.*?) ?\\(".concat(wt).concat(Et,"?").concat(Et,"?\\)?\\s*$"),"i"),St=new RegExp("\\((\\S*)".concat(Et).concat(Et,"\\)")),Ct=new RegExp("^\\s*at ?".concat(wt).concat(Et,"?").concat(Et,"??\\s*$"),"i"),xt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ot=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Tt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Rt(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var Lt="No stack, consider using an instance of Error";function Pt(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,s=e.handling,c=n instanceof Error,u=function(e,t,n,r){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":"".concat(n," ").concat(F(V(r)))}(t,c,i,n),l=function(e,t){return void 0!==t&&(!!e||t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url))}(c,t)?_t(t):Lt,f=c?function(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var o=bt(n.cause);r.push({message:n.cause.message,source:t,type:null==o?void 0:o.name,stack:o&&_t(o)}),n=n.cause}return r.length?r:void 0}(n,a):void 0;return{startClocks:o,source:a,handling:s,handlingStack:r,originalError:n,type:null==t?void 0:t.name,message:u,stack:l,causes:f,fingerprint:Dt(n)}}function Dt(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function _t(e){var t=It(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)})),t}function It(e){return"".concat(e.name||"Error",": ").concat(e.message)}var At={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Ut(e,t,n,r,o){return n?_t({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=o?o:void 0}]}):void 0}var jt=32*S;function Nt(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return m(t,e)}))?"all"===e?t:(r=e,o=new Set,r.forEach((function(e){return o.add(e)})),y(o)):void s.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));var r,o}var Ft={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"},Mt={debug:"debug",error:"error",info:"info",warn:"warn"},qt="console",Bt="http",Ht=Object.keys(Mt),Vt=function(){function e(e,t,n,r,o){void 0===n&&(n=Bt),void 0===r&&(r=Mt.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=Y(3),this.contextManager.set(E({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n,r){var o;if(void 0===n&&(n=Mt.info),n===Mt.error&&(o={origin:Ft.LOGGER}),null!=r){var i=Pt({stackTrace:r instanceof Error?bt(r):void 0,originalError:r,nonErrorPrefix:"Provided",source:Ft.LOGGER,handling:"handled",startClocks:se()});o={origin:Ft.LOGGER,stack:i.stack,kind:i.type,message:i.message}}var a=V(t),s=o?N({error:o},a):a;this.handleLogStrategy({message:V(e),context:s,status:n},this)},e.prototype.debug=function(e,t,n){this.log(e,t,Mt.debug,n)},e.prototype.info=function(e,t,n){this.log(e,t,Mt.info,n)},e.prototype.warn=function(e,t,n){this.log(e,t,Mt.warn,n)},e.prototype.error=function(e,t,n){this.log(e,t,Mt.error,n)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([p],e.prototype,"log",null),e}(),Gt="logs";function $t(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}var zt,Jt={log:"log",configuration:"configuration"},Kt=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],Wt=["ddog-gov.com"],Xt={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function Zt(e,t){h(r.debug,e,t),Qt(E({type:Jt.log,message:e,status:"debug"},t))}function Yt(e,t){Qt(E({type:Jt.log,status:"error"},function(e){if(e instanceof Error){var t=bt(e);return{error:{kind:t.name,stack:_t(en(t))},message:t.message}}return{error:{stack:Lt},message:"".concat("Uncaught"," ").concat(F(e))}}(e),t))}function Qt(e){zt&&Xt.sentEventCount<Xt.maxEventsPerPage&&(Xt.sentEventCount+=1,zt(e))}function en(e){return e.stack=e.stack.filter((function(e){return!e.url||Kt.some((function(t){return w(e.url,t)}))})),e}var tn={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"},nn="datadog-synthetics-public-id",rn="datadog-synthetics-result-id",on="datadog-synthetics-injects-rum";function an(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Le(on))}function sn(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||Le(rn);return"string"==typeof e?e:void 0}var cn=function(){function e(e,t,n){var r=this;this.request=e,this.flushController=t,this.messageBytesLimit=n,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe((function(e){return r.flush(e)}))}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.stop=function(){this.flushSubscription.unsubscribe()},e.prototype.flush=function(e){var t=this.pushOnlyBuffer.concat(b(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var n,r={data:t.join("\n"),bytesCount:e.bytesCount,flushReason:e.reason};n=e.reason,m(b(tn),n)?this.request.sendOnExit(r):this.request.send(r)},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,o=n.messageBytesCount;o>=this.messageBytesLimit?s.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(t)&&this.remove(t),this.push(r,o,t))},e.prototype.process=function(e){var t=F(e);return{processedMessage:t,messageBytesCount:O(t)}},e.prototype.push=function(e,t,n){var r=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(t+r),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.flushController.notifyAfterAddMessage()},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=O(t),r=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(n+r)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e}();function un(e){return e>=500}var ln=80*S,fn=32,dn=3*C,pn=ne,vn=te;function gn(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?mn(e,t,n,{onSuccess:function(){return yn(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),hn(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function hn(e,t,n,r){2===e.transportStatus&&R((function(){mn(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=vn,yn(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(pn,2*e.currentBackoffTime),hn(e,t,n,r)}})}),e.currentBackoffTime)}function mn(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||un(e.status))}(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},i()):(t.transportStatus=0,o())}))}function yn(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(dn/C,"MiB"),source:Ft.AGENT,startClocks:se()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=bn();i.size()>0;)gn(i.dequeue(),t,n,r,o)}function bn(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=dn}}}var wn=!1;function En(e,t,n,r){var o=new XMLHttpRequest;o.open("POST",t,!0),fe(0,o,"loadend",(function(){null==r||r({status:o.status})}),{once:!0}),o.send(n)}function kn(e,t,n,r,o,i){var a=c(e,t.endpoint),s=n&&c(e,n.endpoint);function c(e,t){return new cn(function(e,t,n,r){var o={transportStatus:0,currentBackoffTime:vn,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=ln&&this.ongoingRequestCount<fn},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:bn(),queueFullReported:!1},i=function(e,r){return function(e,t,n,r,o){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&r.bytesCount<n){var i=t.build("fetch",r);fetch(i,{method:"POST",body:r.data,keepalive:!0,mode:"cors"}).then(v((function(e){return null==o?void 0:o({status:e.status,type:e.type})})),v((function(){En(0,t.build("xhr",r),r.data,o)})))}else{En(0,t.build("xhr",r),r.data,o)}}(0,t,n,e,r)};return{send:function(e){gn(e,o,i,t.endpointType,r)},sendOnExit:function(e){!function(e,t,n,r){if(navigator.sendBeacon&&r.bytesCount<n)try{var o=t.build("beacon",r);if(navigator.sendBeacon(o,r.data))return}catch(e){!function(e){wn||(wn=!0,Yt(e))}(e)}En(0,t.build("xhr",r),r.data)}(0,t,n,e)}}}(0,t,e.batchBytesLimit,r),function(e){var t,n=e.messagesLimit,r=e.bytesLimit,o=e.durationLimit,i=e.pageExitObservable,a=e.sessionExpireObservable,s=i.subscribe((function(e){return d(e.reason)})),c=a.subscribe((function(){return d("session_expire")})),u=new J((function(){return function(){s.unsubscribe(),c.unsubscribe()}})),l=0,f=0;function d(e){if(0!==f){var t=f,n=l;f=0,l=0,p(),u.notify({reason:e,messagesCount:t,bytesCount:n})}}function p(){L(t),t=void 0}return{flushObservable:u,get messagesCount(){return f},notifyBeforeAddMessage:function(e){l+e>=r&&d("bytes_limit"),f+=1,l+=e,void 0===t&&(t=R((function(){d("duration_limit")}),o))},notifyAfterAddMessage:function(){f>=n?d("messages_limit"):l>=r&&d("bytes_limit")},notifyAfterRemoveMessage:function(e){l-=e,0==(f-=1)&&p()}}}({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),e.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(e,t){void 0===t&&(t=!0),a.add(e),s&&t&&s.add(n.transformMessage?n.transformMessage(e):e)},upsert:function(e,t){a.upsert(e,t),s&&s.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:function(){a.stop(),null==s||s.stop()}}}var Sn=1/0,Cn=ne,xn=function(){function e(e,t){var n=this;this.expireDelay=e,this.maxEntries=t,this.entries=[],this.clearOldValuesInterval=P((function(){return n.clearOldValues()}),Cn)}return e.prototype.add=function(e,t){var n=this,r={value:e,startTime:t,endTime:Sn,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=Sn);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.value;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===Sn&&t.close(e)},e.prototype.findAll=function(e,t){void 0===e&&(e=Sn),void 0===t&&(t=0);var n=e+t;return this.entries.filter((function(t){return t.startTime<=n&&e<=t.endTime})).map((function(e){return e.value}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){D(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var e=ae()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),On=ne,Tn=Oe,Rn=[];function Ln(e,t,n){var r=ot(e.sessionStoreStrategyType,t,n);Rn.push((function(){return r.stop()}));var o,i=new xn(Tn);function a(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return Rn.push((function(){return i.stop()})),r.renewObservable.subscribe((function(){i.add(a(),ae())})),r.expireObservable.subscribe((function(){i.closeActive(ae())})),r.expandOrRenewSession(),i.add(a(),[0,ce()][0]),o=de(0,window,["click","touchstart","keydown","scroll"],(function(){return r.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,Rn.push(o),function(e,t){var n=function(){"visible"===document.visibilityState&&r.expandSession()},o=fe(0,document,"visibilitychange",n).stop;Rn.push(o);var i=P(n,On);Rn.push((function(){D(i)}))}(),{findActiveSession:function(e){return i.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable,expire:r.expire}}var Pn;function Dn(e){return be(e.sessionSampleRate)?"1":"0"}var _n=((Pn={})[Mt.debug]=0,Pn[Mt.info]=1,Pn[Mt.warn]=2,Pn[Mt.error]=3,Pn);function In(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return _n[e]>=_n[n.getLevel()]&&m(o,t)}var An=!1;function Un(e){var t,n=window;if(an()){var r=o(n.DD_RUM_SYNTHETICS);return r||An||(An=!0,Zt("Logs sent before RUM is injected by the synthetics worker",{testId:(t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Le(nn),"string"==typeof t?t:void 0),resultId:sn()})),r}return o(n.DD_RUM);function o(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var jn,Nn={};var Fn,Mn,qn=((jn={})[r.log]=Mt.info,jn[r.debug]=Mt.debug,jn[r.info]=Mt.info,jn[r.warn]=Mt.warn,jn[r.error]=Mt.error,jn),Bn=((Fn={})[At.cspViolation]=Mt.error,Fn[At.intervention]=Mt.error,Fn[At.deprecation]=Mt.warn,Fn);function Hn(e,t,n){var r=e[t],o=n(r),i=function(){if("function"==typeof o)return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function Vn(e,t,n){var r=n.before,o=n.after;return Hn(e,t,(function(e){return function(){var t,n=arguments;return r&&g(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&g(o,this,n),t}}))}var Gn,$n=new WeakMap;function zn(e){return Mn||(Mn=function(e){var t=new J((function(){var n=Vn(XMLHttpRequest.prototype,"open",{before:Jn}).stop,r=Vn(XMLHttpRequest.prototype,"send",{before:function(){Kn.call(this,e,t)}}).stop,o=Vn(XMLHttpRequest.prototype,"abort",{before:Wn}).stop;return function(){n(),r(),o()}}));return t}(e)),Mn}function Jn(e,t){$n.set(this,{state:"open",method:e,url:it(String(t))})}function Kn(e,t){var n=this,r=$n.get(this);if(r){var o=r;o.state="start",o.startTime=ae(),o.startClocks=se(),o.isAborted=!1,o.xhr=this;var i=!1,a=Vn(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=function(){if(c(),a(),!i){i=!0;var e,s=r;s.state="complete",s.duration=(e=o.startClocks.timeStamp,ie()-e),s.status=n.status,t.notify(E({},s))}},c=fe(0,this,"loadend",s).stop;t.notify(o)}}function Wn(){var e=$n.get(this);e&&(e.isAborted=!0)}function Xn(e,t,n){var r=n&&n.method||t instanceof Request&&t.method||"GET",o=t instanceof Request?t.url:it(String(t)),i={state:"start",init:n,input:t,method:r,startClocks:se(),url:o};return e.notify(i),i}function Zn(e,t,n){var r=function(t){var r=n;r.state="resolve","stack"in t||t instanceof Error?(r.status=0,r.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,r.error=t):"status"in t&&(r.response=t,r.responseType=t.type,r.status=t.status,r.isAborted=!1),e.notify(r)};t.then(v(r),v(r))}function Yn(e,t){if(!e.forwardErrorsToLogs)return{stop:I};var n,r=zn(e).subscribe((function(e){"complete"===e.state&&i("xhr",e)})),o=(Gn||(n=new J((function(){if(window.fetch)return Hn(window,"fetch",(function(e){return function(t,r){var o,i=g(Xn,null,[n,t,r]);return i?(o=e.call(this,i.input,i.init),g(Zn,null,[n,o,i])):o=e.call(this,t,r),o}})).stop})),Gn=n),Gn).subscribe((function(e){"resolve"===e.state&&i("fetch",e)}));function i(n,r){function o(e){t.notify(0,{rawLogsEvent:{message:"".concat(er(n)," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{origin:Ft.NETWORK,stack:e||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url},status:Mt.error,origin:Ft.NETWORK}})}e.isIntakeUrl(r.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!un(r.status)||("xhr"in r?function(e,t,n){"string"==typeof e.response?n(Qn(e.response,t)):n(e.response)}(r.xhr,e,o):r.response?function(e,t,n){var r=function(e){try{return e.clone()}catch(e){return}}(e);r&&r.body?window.TextDecoder?function(e,t,n){!function(e,t,n){var r=e.getReader(),o=[],i=0;function a(){var e,a;if(r.cancel().catch(I),n.collectStreamBody){var s;if(1===o.length)s=o[0];else{s=new Uint8Array(i);var c=0;o.forEach((function(e){s.set(e,c),c+=e.length}))}e=s.slice(0,n.bytesLimit),a=s.length>n.bytesLimit}t(void 0,e,a)}!function e(){r.read().then(v((function(t){t.done?a():(n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?a():e())})),v((function(e){return t(e)})))}()}(e,(function(e,t,r){if(e)n(e);else{var o=(new TextDecoder).decode(t);r&&(o+="..."),n(void 0,o)}}),{bytesLimit:t,collectStreamBody:!0})}(r.body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):r.text().then(v((function(e){return n(Qn(e,t))})),v((function(e){return n("Unable to retrieve response: ".concat(e))}))):n()}(r.response,e,o):r.error&&function(e,t,n){n(Qn(_t(bt(e)),t))}(r.error,e,o))}return{stop:function(){r.unsubscribe(),o.unsubscribe()}}}function Qn(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function er(e){return"xhr"===e?"XHR":"Fetch"}var tr=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function nr(e,t){if(!e.forwardErrorsToLogs)return{stop:I};var n,r,o,i,a=new J,s=(n=a,r=function(e,t){n.notify(Pt({stackTrace:e,originalError:t,startClocks:se(),nonErrorPrefix:"Uncaught",source:Ft.SOURCE,handling:"unhandled"}))},o=function(e){return Vn(window,"onerror",{before:function(t,n,r,o,i){var a;if(i instanceof Error)a=bt(i);else{var s=[{url:n,column:o,line:r}],c=function(e){var t,n,r;return"[object String]"==={}.toString.call(e)&&(n=(t=tr.exec(e))[1],r=t[2]),{name:n,message:r}}(t);a={name:c.name,message:c.message,stack:s}}e(a,null!=i?i:t)}})}(r).stop,i=function(e){return Vn(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=bt(n);e(r,n)}})}(r).stop,{stop:function(){o(),i()}}).stop,c=a.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:Ft.SOURCE,stack:e.stack},origin:Ft.SOURCE,status:Mt.error}})}));return{stop:function(){s(),c.unsubscribe()}}}var rr,or,ir,ar=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}(),sr=function(e){var t,n,a=!1,c=Y(2),l=Y(1),f={},p=function(){},h=new ee,w=function(e,t,n,r){void 0===n&&(n=j(C())),void 0===r&&(r=ie()),h.add((function(){return w(e,t,n,r)}))},k=function(){},S=new Vt((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w.apply(void 0,e)}));function C(){return{view:{referrer:document.referrer,url:window.location.href},context:c.getContext(),user:l.getContext()}}return t={logger:S,init:v((function(e){var t;if(e){if(k=function(){return j(e)},le()&&(e=function(e){return E({},e,{clientToken:"empty"})}(e)),function(e){return!a||(e.silentMultipleInit||s.error("DD_LOGS is already initialized."),!1)}(e)){var n=function(e){var t=mt(e),n=Nt(e.forwardConsoleLogs,b(r),"Forward Console Logs"),o=Nt(e.forwardReports,b(At),"Forward Reports");if(t&&n&&o)return e.forwardErrorsToLogs&&!m(n,r.error)&&n.push(r.error),E({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:o,requestErrorResponseLengthLimit:jt},t)}(e);if(n){if(e.storeContextsAcrossPages){var f=c.getContext();(c=ge(0,Gt,2)).setContext(N(c.getContext(),f));var d=l.getContext();(l=ge(0,Gt,1)).setContext(N(l.getContext(),d))}t=function(e,t,n,a){var s=new ar,c=[];s.subscribe(1,(function(e){return $t("logs",e)}));var l=function(e){s.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:Ft.AGENT},origin:Ft.AGENT,status:Mt.error}}),Zt("Error reported to customer",{"error.message":e.message})},f=(w=new J((function(){var e=ye(pe.PAGEHIDE),t=de(0,window,["visibilitychange","freeze","pagehide"],(function(t){"pagehide"===t.type&&e?w.notify({reason:tn.PAGEHIDE}):"visibilitychange"===t.type&&"hidden"===document.visibilityState?w.notify({reason:tn.HIDDEN}):"freeze"===t.type&&w.notify({reason:tn.FROZEN})}),{capture:!0}).stop,n=I;return e||(n=fe(0,window,"beforeunload",(function(){w.notify({reason:tn.UNLOADING})})).stop),function(){t(),n()}})),w),d=!t.sessionStoreStrategyType||le()||an()?function(e){var t="1"===Dn(e)?{}:void 0;return{findTrackedSession:function(){return t},expireObservable:new J}}(t):function(e){var t=Ln(e,"logs",(function(t){return function(e,t){var n=function(e){return"0"===e||"1"===e}(t)?t:Dn(e);return{trackingType:n,isTracked:"1"===n}}(e,t)}));return{findTrackedSession:function(e){var n=t.findActiveSession(e);return n&&"1"===n.trackingType?{id:n.id}:void 0},expireObservable:t.expireObservable}}(t),p=function(e,t,n,r){var o=function(e,t){var n,r=new J;Xt.telemetryEnabled=!m(Wt,t.site)&&be(t.telemetrySampleRate),Xt.telemetryConfigurationEnabled=Xt.telemetryEnabled&&be(t.telemetryConfigurationSampleRate);var o={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return zt=function(t){if(Xt.telemetryEnabled){var i=function(e,t,r){return N({type:"telemetry",date:ie(),service:e,version:"4.50.1",source:"browser",_dd:{format_version:2},telemetry:N(t,{runtime_env:r}),experimental_features:y(me)},void 0!==n?n():{})}(e,t,o);r.notify(i),$t("telemetry",i)}},u=Yt,E(Xt,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){n=e},observable:r,enabled:Xt.telemetryEnabled}}("browser-logs-sdk",e),i=[];if(le()){var a=ue(),s=o.observable.subscribe((function(e){return a.send("internal_telemetry",e)}));i.push((function(){return s.unsubscribe()}))}else{var c=kn(e,{endpoint:e.rumEndpointBuilder},e.replica&&{endpoint:e.replica.rumEndpointBuilder},t,n,r);i.push((function(){return c.stop()}));var l=o.observable.subscribe((function(t){return c.add(t,function(e){return e.site===ct}(e))}));i.push((function(){return l.unsubscribe()}))}return{telemetry:o,stop:function(){i.forEach((function(e){return e()}))}}}(t,l,f,d.expireObservable),h=p.telemetry,b=p.stop;var w;c.push((function(){return b()})),h.setContextProvider((function(){var e,t,n,r,o,i;return{application:{id:null===(e=Un())||void 0===e?void 0:e.application_id},session:{id:null===(t=d.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=Un())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(i=null===(o=Un())||void 0===o?void 0:o.user_action)||void 0===i?void 0:i.id}}})),Yn(t,s),nr(t,s),function(e,t){var n,i;(n=e.forwardConsoleLogs,i=n.map((function(e){return Nn[e]||(Nn[e]=function(e){var t=new J((function(){var n=o[e];return o[e]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n.apply(console,o);var a=function(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return g((function(){var n=bt(t);n.stack=n.stack.slice(2),e=_t(n)})),e}();g((function(){t.notify(function(e,t,n){var o,i,a=e.map((function(e){return function(e){return"string"==typeof e?V(e):e instanceof Error?It(bt(e)):F(V(e),void 0,2)}(e)})).join(" ");if(t===r.error){var s=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(r instanceof Error)return r}}(e);o=s?_t(bt(s)):void 0,i=Dt(s),a="console error: ".concat(a)}return{api:t,message:a,stack:o,handlingStack:n,fingerprint:i}}(o,e,a))}))},function(){o[e]=n}}));return t}(e)),Nn[e]})),K.apply(void 0,i)).subscribe((function(e){t.notify(0,{rawLogsEvent:{date:ie(),message:e.message,origin:Ft.CONSOLE,error:e.api===r.error?{origin:Ft.CONSOLE,stack:e.stack,fingerprint:e.fingerprint}:void 0,status:qn[e.api]}})}))}(t,s),function(e,t){(function(e,t){var n,r=[];m(t,At.cspViolation)&&r.push(n=new J((function(){return fe(0,document,"securitypolicyviolation",(function(e){n.notify(function(e){var t=At.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:At.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:Ut(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(Se(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(e))})).stop})));var o=t.filter((function(e){return e!==At.cspViolation}));return o.length&&r.push(function(e){var t=new J((function(){if(window.ReportingObserver){var n=v((function(e,n){return e.forEach((function(e){t.notify(function(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:Ut(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t}(o)),K.apply(void 0,r)})(0,e.forwardReports).subscribe((function(e){var n,r=e.message,o=Bn[e.type];o===Mt.error?n={kind:e.subtype,origin:Ft.REPORT,stack:e.stack}:e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:ie(),message:r,origin:Ft.REPORT,error:n,status:o}})}))}(t,s);var k,S=function(e){return{handleLog:function(t,n,r,a){var s=t.context;In(t.status,qt,n)&&function(e,t){i[e.status].call(o,e.message,t)}(t,N(n.getContext(),s)),e.notify(0,{rawLogsEvent:{date:a||ie(),message:t.message,status:t.status,origin:Ft.LOGGER},messageContext:s,savedCommonContext:r,logger:n})}}}(s).handleLog;if(function(e,t,n,r,o,i){var a=Ht.concat(["custom"]),s={};a.forEach((function(e){var n,r,o,a,c;s[e]=(n=e,r=t.eventRateLimiterThreshold,o=i,a=0,c=!1,{isLimitReached:function(){if(0===a&&R((function(){a=0}),ne),(a+=1)<=r||c)return c=!1,!1;if(a===r+1){c=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(r),source:Ft.AGENT,startClocks:se()})}finally{c=!1}}return!0}})})),n.subscribe(0,(function(i){var a,c,u,l=i.rawLogsEvent,f=i.messageContext,d=void 0===f?void 0:f,p=i.savedCommonContext,v=void 0===p?void 0:p,g=i.logger,h=void 0===g?o:g,m=l.date-ce(),y=e.findTrackedSession(m);if(y){var b=v||r(),w=N({service:t.service,session_id:y.id,usr:Ee(b.user)?void 0:b.user,view:b.view},b.context,Un(m),l,h.getContext(),d);!In(l.status,Bt,h)||!1===(null===(a=t.beforeSend)||void 0===a?void 0:a.call(t,w))||(null===(c=w.error)||void 0===c?void 0:c.origin)!==Ft.AGENT&&(null!==(u=s[w.status])&&void 0!==u?u:s.custom).isLimitReached()||n.notify(1,w)}}))}(d,t,s,n,a,l),le())!function(e){var t=ue();e.subscribe(1,(function(e){t.send("log",e)}))}(s);else{var C=function(e,t,n,r,o){var i=kn(e,{endpoint:e.logsEndpointBuilder},e.replica&&{endpoint:e.replica.logsEndpointBuilder},n,r,o);return t.subscribe(1,(function(e){i.add(e)})),i}(t,s,l,f,d.expireObservable).stop;c.push((function(){return C()}))}return function(e){Xt.telemetryConfigurationEnabled&&Qt({type:Jt.configuration,configuration:e})}(function(e){var t=function(e){var t,n,r=null!==(t=e.proxy)&&void 0!==t?t:e.proxyUrl;return{session_sample_rate:null!==(n=e.sessionSampleRate)&&void 0!==n?n:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==r?!!r:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages}}(e);return E({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}(e)),{handleLog:S,getInternalContext:(k=d,{get:function(e){var t=k.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,stop:function(){c.forEach((function(e){return e()}))}}}(e,n,C,S),w=t.handleLog,p=t.getInternalContext,h.drain(),a=!0}}}else s.error("Missing configuration")})),getLoggerGlobalContext:v((function(){return c.get()})),getGlobalContext:v((function(){return c.getContext()})),setLoggerGlobalContext:v((function(e){return c.set(e)})),setGlobalContext:v((function(e){return c.setContext(e)})),addLoggerGlobalContext:v((function(e,t){return c.add(e,t)})),setGlobalContextProperty:v((function(e,t){return c.setContextProperty(e,t)})),removeLoggerGlobalContext:v((function(e){return c.remove(e)})),removeGlobalContextProperty:v((function(e){return c.removeContextProperty(e)})),clearGlobalContext:v((function(){return c.clearContext()})),createLogger:v((function(e,t){return void 0===t&&(t={}),f[e]=new Vt((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w.apply(void 0,e)}),V(e),t.handler,t.level,V(t.context)),f[e]})),getLogger:v((function(e){return f[e]})),getInitConfiguration:v((function(){return k()})),getInternalContext:v((function(e){return p(e)})),setUser:v((function(e){(function(e){var t="object"===A(e);return t||s.error("Unsupported user:",e),t})(e)&&l.setContext(he(e))})),getUser:v((function(){return l.getContext()})),setUserProperty:v((function(e,t){var n,r=he((n={},n[e]=t,n))[e];l.setContextProperty(e,r)})),removeUserProperty:v((function(e){return l.removeContextProperty(e)})),clearUser:v((function(){return l.clearContext()}))},n=E({version:"4.50.1",onReady:function(e){e()}},t),Object.defineProperty(n,"_setDebug",{get:function(){return d},enumerable:!1}),n}();rr=k(),or=sr,ir=rr["DD_LOGS"],rr.DD_LOGS=or,ir&&ir.q&&ir.q.forEach((function(e){return c(e,"onReady callback threw an error:")()}))},597:(e,t,n)=>{function r(e){function t(e,t){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=t}return t.prototype=new Error,t.prototype.name=e,t.prototype.constructor=t,t}n.d(t,{j2:()=>yt});const o=r("LaunchDarklyUnexpectedResponseError"),i=r("LaunchDarklyInvalidEnvironmentIdError"),a=r("LaunchDarklyInvalidUserError"),s=r("LaunchDarklyInvalidEventKeyError"),c=r("LaunchDarklyInvalidArgumentError"),u=r("LaunchDarklyFlagFetchError");for(var l={LDUnexpectedResponseError:o,LDInvalidEnvironmentIdError:i,LDInvalidUserError:a,LDInvalidEventKeyError:s,LDInvalidArgumentError:c,LDInvalidDataError:r("LaunchDarklyInvalidDataError"),LDFlagFetchError:u,isHttpErrorRecoverable:function(e){return!(e>=400&&e<500)||400===e||408===e||429===e}},f=[],d=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0;g<64;++g)f[g]=v[g],d[v.charCodeAt(g)]=g;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function m(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(f[(o=r)>>18&63]+f[o>>12&63]+f[o>>6&63]+f[63&o]);return i.join("")}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63;var y={byteLength:function(e){var t=h(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=h(e),o=r[0],i=r[1],a=new p(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),s=0,c=i>0?o-4:o;for(n=0;n<c;n+=4)t=d[e.charCodeAt(n)]<<18|d[e.charCodeAt(n+1)]<<12|d[e.charCodeAt(n+2)]<<6|d[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===i&&(t=d[e.charCodeAt(n)]<<2|d[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===i&&(t=d[e.charCodeAt(n)]<<10|d[e.charCodeAt(n+1)]<<4|d[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,s=n-r;a<s;a+=i)o.push(m(e,a,a+i>s?s:a+i));return 1===r?(t=e[n-1],o.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),o.join("")}},b=Array.isArray,w=Object.keys,E=Object.prototype.hasOwnProperty,k=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,o,i,a=b(t),s=b(n);if(a&&s){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var c=t instanceof Date,u=n instanceof Date;if(c!=u)return!1;if(c&&u)return t.getTime()==n.getTime();var l=t instanceof RegExp,f=n instanceof RegExp;if(l!=f)return!1;if(l&&f)return t.toString()==n.toString();var d=w(t);if((o=d.length)!==w(n).length)return!1;for(r=o;0!=r--;)if(!E.call(n,d[r]))return!1;for(r=o;0!=r--;)if(!e(t[i=d[r]],n[i]))return!1;return!0}return t!=t&&n!=n};const S=["key","ip","country","email","firstName","lastName","avatar","name"];function C(e){const t=unescape(encodeURIComponent(e));return y.fromByteArray(function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}(t))}function x(e){return C(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T,R={appendUrlPath:function(e,t){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(t.startsWith("/")?"":"/")+t},base64URLEncode:x,btoa:C,chunkEventsForUrl:function(e,t){const n=t.slice(0),r=[];let o,i=e;for(;n.length>0;){for(o=[];i>0;){const e=n.shift();if(!e)break;i-=x(JSON.stringify(e)).length,i<0&&o.length>0?n.unshift(e):o.push(e)}i=e,r.push(o)}return r},clone:function(e){return JSON.parse(JSON.stringify(e))},deepEquals:function(e,t){return k(e,t)},extend:function(...e){return e.reduce(((e,t)=>({...e,...t})),{})},getLDUserAgentString:function(e){const t=e.version||"?";return e.userAgent+"/"+t},objectHasOwnProperty:O,onNextTick:function(e){setTimeout(e,0)},sanitizeContext:function(e){if(!e)return e;let t;return null!==e.kind&&void 0!==e.kind||S.forEach((n=>{const r=e[n];void 0!==r&&"string"!=typeof r&&(t=t||{...e},t[n]=String(r))})),t||e},transformValuesToVersionedValues:function(e){const t={};for(const n in e)O(e,n)&&(t[n]={value:e[n],version:0});return t},transformVersionedValuesToValues:function(e){const t={};for(const n in e)O(e,n)&&(t[n]=e[n].value);return t},wrapPromiseCallback:function(e,t){const n=e.then((e=>(t&&setTimeout((()=>{t(null,e)}),0),e)),(e=>{if(!t)return Promise.reject(e);setTimeout((()=>{t(e,null)}),0)}));return t?void 0:n}},L=new Uint8Array(16);function P(){if(!T&&!(T="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return T(L)}var D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _(e){return"string"==typeof e&&D.test(e)}for(var I,A,U=[],j=0;j<256;++j)U.push((j+256).toString(16).substr(1));function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(U[e[t+0]]+U[e[t+1]]+U[e[t+2]]+U[e[t+3]]+"-"+U[e[t+4]]+U[e[t+5]]+"-"+U[e[t+6]]+U[e[t+7]]+"-"+U[e[t+8]]+U[e[t+9]]+"-"+U[e[t+10]]+U[e[t+11]]+U[e[t+12]]+U[e[t+13]]+U[e[t+14]]+U[e[t+15]]).toLowerCase();if(!_(n))throw TypeError("Stringified UUID is invalid");return n}var F=0,M=0;function q(e){if(!_(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function B(e,t,n){function r(e,r,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=q(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return N(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function H(e){return 14+(e+64>>>9<<4)+1}function V(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function G(e,t,n,r,o,i){return V((a=V(V(t,e),V(r,i)))<<(s=o)|a>>>32-s,n);var a,s}function $(e,t,n,r,o,i,a){return G(t&n|~t&r,e,t,o,i,a)}function z(e,t,n,r,o,i,a){return G(t&r|n&~r,e,t,o,i,a)}function J(e,t,n,r,o,i,a){return G(t^n^r,e,t,o,i,a)}function K(e,t,n,r,o,i,a){return G(n^(t|~r),e,t,o,i,a)}var W=B("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",o=0;o<n;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[H(t)-1]=t;for(var n=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=n,c=r,u=o,l=i;n=$(n,r,o,i,e[a],7,-680876936),i=$(i,n,r,o,e[a+1],12,-389564586),o=$(o,i,n,r,e[a+2],17,606105819),r=$(r,o,i,n,e[a+3],22,-1044525330),n=$(n,r,o,i,e[a+4],7,-176418897),i=$(i,n,r,o,e[a+5],12,1200080426),o=$(o,i,n,r,e[a+6],17,-1473231341),r=$(r,o,i,n,e[a+7],22,-45705983),n=$(n,r,o,i,e[a+8],7,1770035416),i=$(i,n,r,o,e[a+9],12,-1958414417),o=$(o,i,n,r,e[a+10],17,-42063),r=$(r,o,i,n,e[a+11],22,-1990404162),n=$(n,r,o,i,e[a+12],7,1804603682),i=$(i,n,r,o,e[a+13],12,-40341101),o=$(o,i,n,r,e[a+14],17,-1502002290),n=z(n,r=$(r,o,i,n,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=z(i,n,r,o,e[a+6],9,-1069501632),o=z(o,i,n,r,e[a+11],14,643717713),r=z(r,o,i,n,e[a],20,-373897302),n=z(n,r,o,i,e[a+5],5,-701558691),i=z(i,n,r,o,e[a+10],9,38016083),o=z(o,i,n,r,e[a+15],14,-660478335),r=z(r,o,i,n,e[a+4],20,-405537848),n=z(n,r,o,i,e[a+9],5,568446438),i=z(i,n,r,o,e[a+14],9,-1019803690),o=z(o,i,n,r,e[a+3],14,-187363961),r=z(r,o,i,n,e[a+8],20,1163531501),n=z(n,r,o,i,e[a+13],5,-1444681467),i=z(i,n,r,o,e[a+2],9,-51403784),o=z(o,i,n,r,e[a+7],14,1735328473),n=J(n,r=z(r,o,i,n,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=J(i,n,r,o,e[a+8],11,-2022574463),o=J(o,i,n,r,e[a+11],16,1839030562),r=J(r,o,i,n,e[a+14],23,-35309556),n=J(n,r,o,i,e[a+1],4,-1530992060),i=J(i,n,r,o,e[a+4],11,1272893353),o=J(o,i,n,r,e[a+7],16,-155497632),r=J(r,o,i,n,e[a+10],23,-1094730640),n=J(n,r,o,i,e[a+13],4,681279174),i=J(i,n,r,o,e[a],11,-358537222),o=J(o,i,n,r,e[a+3],16,-722521979),r=J(r,o,i,n,e[a+6],23,76029189),n=J(n,r,o,i,e[a+9],4,-640364487),i=J(i,n,r,o,e[a+12],11,-421815835),o=J(o,i,n,r,e[a+15],16,530742520),n=K(n,r=J(r,o,i,n,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=K(i,n,r,o,e[a+7],10,1126891415),o=K(o,i,n,r,e[a+14],15,-1416354905),r=K(r,o,i,n,e[a+5],21,-57434055),n=K(n,r,o,i,e[a+12],6,1700485571),i=K(i,n,r,o,e[a+3],10,-1894986606),o=K(o,i,n,r,e[a+10],15,-1051523),r=K(r,o,i,n,e[a+1],21,-2054922799),n=K(n,r,o,i,e[a+8],6,1873313359),i=K(i,n,r,o,e[a+15],10,-30611744),o=K(o,i,n,r,e[a+6],15,-1560198380),r=K(r,o,i,n,e[a+13],21,1309151649),n=K(n,r,o,i,e[a+4],6,-145523070),i=K(i,n,r,o,e[a+11],10,-1120210379),o=K(o,i,n,r,e[a+2],15,718787259),r=K(r,o,i,n,e[a+9],21,-343485551),n=V(n,s),r=V(r,c),o=V(o,u),i=V(i,l)}return[n,r,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(H(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),X=W;function Z(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Y(e,t){return e<<t|e>>>32-t}var Q=B("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[f][p];for(var v=16;v<80;++v)d[v]=Y(d[v-3]^d[v-8]^d[v-14]^d[v-16],1);for(var g=n[0],h=n[1],m=n[2],y=n[3],b=n[4],w=0;w<80;++w){var E=Math.floor(w/20),k=Y(g,5)+Z(E,h,m,y)+b+t[E]+d[w]>>>0;b=y,y=m,m=Y(h,30)>>>0,h=g,g=k}n[0]=n[0]+g>>>0,n[1]=n[1]+h>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),ee=Q,te=Object.freeze({__proto__:null,v1:function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||I,a=void 0!==e.clockseq?e.clockseq:A;if(null==i||null==a){var s=e.random||(e.rng||P)();null==i&&(i=I=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=A=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:M+1,l=c-F+(u-M)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||c>F)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");F=c,M=u,A=a;var f=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var d=c/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return t||N(o)},v3:X,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||P)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return N(r)},v5:ee,NIL:"00000000-0000-0000-0000-000000000000",version:function(e){if(!_(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)},validate:_,stringify:N,parse:q});const ne=["debug","info","warn","error","none"];var re={commonBasicLogger:function(e,t){if(e&&e.destination&&"function"!=typeof e.destination)throw new Error("destination for basicLogger was set to a non-function");function n(e){return function(t){console&&console[e]&&console[e].call(console,t)}}const r=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[n("log"),n("info"),n("warn"),n("error")],o=!(!e||!e.destination),i=e&&void 0!==e.prefix&&null!==e.prefix?e.prefix:"[LaunchDarkly] ";let a=1;if(e&&e.level)for(let t=0;t<ne.length;t++)ne[t]===e.level&&(a=t);function s(e,n,a){if(a.length<1)return;let s;const c=o?n+": "+i:i;if(1!==a.length&&t){const e=[...a];e[0]=c+e[0],s=t(...e)}else s=c+a[0];try{r[e](s)}catch(e){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+n+" method threw an exception: "+e)}}const c={};for(let e=0;e<ne.length;e++){const t=ne[e];if("none"!==t)if(e<a)c[t]=()=>{};else{const n=e;c[t]=function(){s(n,t,arguments)}}}return c},validateLogger:function(e){ne.forEach((t=>{if("none"!==t&&(!e[t]||"function"!=typeof e[t]))throw new Error("Provided logger instance must support logger."+t+"(...) method")}))}};function oe(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}const ie=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.";var ae={bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},bootstrapOldFormat:function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+ie},clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},debugEnqueueingEvent:function(e){return'enqueueing "'+e+'" event'},debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},debugPostingEvents:function(e){return"sending "+e+" events"},debugStreamDelete:function(e){return'received streaming deletion for flag "'+e+'"'},debugStreamDeleteIgnored:function(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'},debugStreamPatch:function(e){return'received streaming update for flag "'+e+'"'},debugStreamPatchIgnored:function(e){return'received streaming update for flag "'+e+'" but ignored due to version check'},debugStreamPing:function(){return"received ping message from stream"},debugPolling:function(e){return"polling for feature flags at "+e},debugStreamPut:function(){return"received streaming update for all flags"},deprecated:function(e,t){return t?'"'+e+'" is deprecated, please use "'+t+'"':'"'+e+'" is deprecated'},environmentNotFound:function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+ie},environmentNotSpecified:function(){return"No environment/client-side ID was specified."+ie},errorFetchingFlags:function(e){return"Error fetching flag settings: "+oe(e)},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutContext:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},httpErrorMessage:function(e,t,n){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+t+" - "+(l.isHttpErrorRecoverable(e)?n:"giving up permanently")},httpUnavailable:function(){return"Cannot make HTTP requests in this environment."+ie},identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},inspectorMethodError:(e,t)=>`an inspector: "${t}" of type: "${e}" generated an exception`,invalidContentType:function(e){return'Expected application/json content type but got "'+e+'"'},invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},invalidInspector:(e,t)=>`an inspector: "${t}" of an invalid type (${e}) was configured`,invalidKey:function(){return"Event key must be a string"},invalidContext:function(){return"Invalid context specified."+ie},invalidTagValue:e=>`Config option "${e}" must only contain letters, numbers, ., _ or -.`,localStorageUnavailable:function(e){return"local storage is unavailable: "+oe(e)},networkError:e=>"network error"+(e?" ("+e+")":""),optionBelowMinimum:(e,t,n)=>'Config option "'+e+'" was set to '+t+", changing to minimum value of "+n,streamClosing:function(){return"Closing stream connection"},streamConnecting:function(e){return"Opening stream connection to "+e},streamError:function(e,t){return"Error on stream connection: "+oe(e)+", will continue retrying after "+t+" milliseconds."},tagValueTooLong:e=>`Value of "${e}" was longer than 64 characters and was discarded.`,unknownCustomEventKey:function(e){return'Custom event "'+e+'" does not exist'},unknownOption:e=>'Ignoring unknown config option "'+e+'"',contextNotSpecified:function(){return"No context specified."+ie},unrecoverableStreamError:e=>`Error on stream connection ${oe(e)}, giving up permanently`,wrongOptionType:(e,t,n)=>'Config option "'+e+'" should be of type '+t+", got "+n+", using default value",wrongOptionTypeBoolean:(e,t)=>'Config option "'+e+'" should be a boolean, got '+t+", converting to boolean"};const{validateLogger:se}=re,ce={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributes:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},application:{validator:function(e,t,n){const r={};return t.id&&(r.id=fe(`${e}.id`,t.id,n)),t.version&&(r.version=fe(`${e}.version`,t.version,n)),r}},inspectors:{default:[]}},ue=/^(\w|\.|-)+$/;function le(e){return e&&e.replace(/\/+$/,"")}function fe(e,t,n){if("string"==typeof t&&t.match(ue)){if(!(t.length>64))return t;n.warn(ae.tagValueTooLong(e))}else n.warn(ae.invalidTagValue(e))}var de={baseOptionDefs:ce,validate:function(e,t,n,r){const o=R.extend({logger:{default:r}},ce,n),i={};function a(e){R.onNextTick((()=>{t&&t.maybeReportError(new l.LDInvalidArgumentError(e))}))}let s=R.extend({},e||{});return function(e){const t=e;Object.keys(i).forEach((e=>{if(void 0!==t[e]){const n=i[e];r&&r.warn(ae.deprecated(e,n)),n&&(void 0===t[n]&&(t[n]=t[e]),delete t[e])}}))}(s),s=function(e){const t=R.extend({},e);return Object.keys(o).forEach((e=>{void 0!==t[e]&&null!==t[e]||(t[e]=o[e]&&o[e].default)})),t}(s),s=function(e){const t=R.extend({},e),n=e=>{if(null===e)return"any";if(void 0===e)return;if(Array.isArray(e))return"array";const t=typeof e;return"boolean"===t||"string"===t||"number"===t||"function"===t?t:"object"};return Object.keys(e).forEach((i=>{const s=e[i];if(null!=s){const c=o[i];if(void 0===c)a(ae.unknownOption(i));else{const o=c.type||n(c.default),u=c.validator;if(u){const n=u(i,e[i],r);void 0!==n?t[i]=n:delete t[i]}else if("any"!==o){const e=o.split("|"),r=n(s);e.indexOf(r)<0?"boolean"===o?(t[i]=!!s,a(ae.wrongOptionTypeBoolean(i,r))):(a(ae.wrongOptionType(i,o,r)),t[i]=c.default):"number"===r&&void 0!==c.minimum&&s<c.minimum&&(a(ae.optionBelowMinimum(i,s,c.minimum)),t[i]=c.minimum)}}}})),t.baseUrl=le(t.baseUrl),t.streamUrl=le(t.streamUrl),t.eventsUrl=le(t.eventsUrl),t}(s),se(s.logger),s},getTags:function(e){const t={};return e&&(e.application&&void 0!==e.application.id&&null!==e.application.id&&(t["application-id"]=[e.application.id]),e.application&&void 0!==e.application.version&&null!==e.application.id&&(t["application-version"]=[e.application.version])),t}};const{getLDUserAgentString:pe}=R;var ve={getLDHeaders:function(e,t){if(t&&!t.sendLDHeaders)return{};const n={};n[e.userAgentHeaderName||"User-Agent"]=pe(e),t&&t.wrapperName&&(n["X-LaunchDarkly-Wrapper"]=t.wrapperVersion?t.wrapperName+"/"+t.wrapperVersion:t.wrapperName);const r=de.getTags(t),o=Object.keys(r);return o.length&&(n["x-launchdarkly-tags"]=o.sort().map((e=>Array.isArray(r[e])?r[e].sort().map((t=>`${e}/${t}`)):[`${e}/${r[e]}`])).reduce(((e,t)=>e.concat(t)),[]).join(" ")),n},transformHeaders:function(e,t){return t&&t.requestHeaderTransform?t.requestHeaderTransform({...e}):e}};const{v1:ge}=te,{getLDHeaders:he,transformHeaders:me}=ve;var ye=function(e,t,n){const r="/a/"+t+".gif",o=R.extend({"Content-Type":"application/json"},he(e,n)),i=e.httpFallbackPing,a={sendChunk:(t,a,s,c)=>{const u=JSON.stringify(t),f=s?null:ge();return c?function t(r){const i=s?o:R.extend({},o,{"X-LaunchDarkly-Event-Schema":"4","X-LaunchDarkly-Payload-ID":f});return e.httpRequest("POST",a,me(i,n),u).promise.then((e=>{if(e)return e.status>=400&&l.isHttpErrorRecoverable(e.status)&&r?t(!1):function(e){const t={status:e.status},n=e.header("date");if(n){const e=Date.parse(n);e&&(t.serverTime=e)}return t}(e)})).catch((()=>r?t(!1):Promise.reject()))}(!0).catch((()=>{})):(i&&i(a+r+"?d="+R.base64URLEncode(u)),Promise.resolve())},sendEvents:function(t,n,r){if(!e.httpRequest)return Promise.resolve();const o=e.httpAllowsPost();let i;i=o?[t]:R.chunkEventsForUrl(2e3-n.length,t);const s=[];for(let e=0;e<i.length;e++)s.push(a.sendChunk(i[e],n,r,o));return Promise.all(s)}};return a};const{commonBasicLogger:be}=re;function we(e){return"string"==typeof e&&"kind"!==e&&e.match(/^(\w|\.|-)+$/)}function Ee(e){return e.includes("%")||e.includes(":")?e.replace(/%/g,"%25").replace(/:/g,"%3A"):e}var ke={checkContext:function(e,t){if(e){if(t&&(void 0===e.kind||null===e.kind))return void 0!==e.key&&null!==e.key;const n=e.key,r=void 0===e.kind?"user":e.kind,o=we(r),i="multi"===r||null!=n&&""!==n;if("multi"===r){const t=Object.keys(e).filter((e=>"kind"!==e));return i&&t.every((e=>we(e)))&&t.every((t=>{const n=e[t].key;return null!=n&&""!==n}))}return i&&o}return!1},getContextKeys:function(e,t=be()){if(!e)return;const n={},{kind:r,key:o}=e;switch(r){case void 0:n.user=`${o}`;break;case"multi":Object.entries(e).filter((([e])=>"kind"!==e)).forEach((([e,t])=>{t&&t.key&&(n[e]=t.key)}));break;case null:t.warn(`null is not a valid context kind: ${e}`);break;case"":t.warn(`'' is not a valid context kind: ${e}`);break;default:n[r]=`${o}`}return n},getContextKinds:function(e){return e?null===e.kind||void 0===e.kind?["user"]:"multi"!==e.kind?[e.kind]:Object.keys(e).filter((e=>"kind"!==e)):[]},getCanonicalKey:function(e){if(e){if((void 0===e.kind||null===e.kind||"user"===e.kind)&&e.key)return e.key;if("multi"!==e.kind&&e.key)return`${e.kind}:${Ee(e.key)}`;if("multi"===e.kind)return Object.keys(e).sort().filter((e=>"kind"!==e)).map((t=>`${t}:${Ee(e[t].key)}`)).join(":")}}};const{getContextKinds:Se}=ke;function Ce(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function xe(e){return(e.startsWith("/")?e.substring(1):e).split("/").map((e=>e.indexOf("~")>=0?e.replace(/~1/g,"/").replace(/~0/g,"~"):e))}function Oe(e){return!e.startsWith("/")}function Te(e,t){const n=Oe(e),r=Oe(t);if(n&&r)return e===t;if(n){const n=xe(t);return 1===n.length&&e===n[0]}if(r){const n=xe(e);return 1===n.length&&t===n[0]}return e===t}function Re(e){return`/${Ce(e)}`}var Le={cloneExcluding:function(e,t){const n=[],r={},o=[];for(n.push(...Object.keys(e).map((t=>({key:t,ptr:Re(t),source:e,parent:r,visited:[e]}))));n.length;){const e=n.pop();if(t.some((t=>Te(t,e.ptr))))o.push(e.ptr);else{const t=e.source[e.key];if(null===t)e.parent[e.key]=t;else if(Array.isArray(t))e.parent[e.key]=[...t];else if("object"==typeof t){if(e.visited.includes(t))continue;e.parent[e.key]={},n.push(...Object.keys(t).map((n=>{return{key:n,ptr:(r=e.ptr,o=Ce(n),`${r}/${o}`),source:t,parent:e.parent[e.key],visited:[...e.visited,t]};var r,o})))}else e.parent[e.key]=t}}return{cloned:r,excluded:o.sort()}},compare:Te,literalToReference:Re};const{getContextKeys:Pe}=ke;const De="ready",_e="initialized",Ie="failed",{appendUrlPath:Ae,base64URLEncode:Ue,objectHasOwnProperty:je}=R,{getLDHeaders:Ne,transformHeaders:Fe}=ve,{isHttpErrorRecoverable:Me}=l;const{transformHeaders:qe,getLDHeaders:Be}=ve,He="application/json";const{v1:Ve}=te,{getContextKinds:Ge}=ke;var $e=function(e){function t(e){return null==e||"user"===e?"ld:$anonUserId":`ld:$contextKey:${e}`}function n(n,r){return null!==r.key&&void 0!==r.key?(r.key=r.key.toString(),Promise.resolve(r)):r.anonymous?function(n){return e.get(t(n))}(n).then((o=>{if(o)return r.key=o,r;{const o=Ve();return r.key=o,function(n,r){return e.set(t(r),n)}(o,n).then((()=>r))}})):Promise.reject(new l.LDInvalidUserError(ae.invalidContext()))}this.processContext=e=>{if(!e)return Promise.reject(new l.LDInvalidUserError(ae.contextNotSpecified()));const t=R.clone(e);if("multi"===e.kind){const e=Ge(t);return Promise.all(e.map((e=>n(e,t[e])))).then((()=>t))}return n(e.kind,t)}};const{v1:ze}=te,{baseOptionDefs:Je}=de,{appendUrlPath:Ke}=R;const{onNextTick:We}=R,Xe={flagUsed:"flag-used",flagDetailsChanged:"flag-details-changed",flagDetailChanged:"flag-detail-changed",clientIdentityChanged:"client-identity-changed"};Object.freeze(Xe);var Ze={InspectorTypes:Xe,InspectorManager:function(e,t){const n={},r={[Xe.flagUsed]:[],[Xe.flagDetailsChanged]:[],[Xe.flagDetailChanged]:[],[Xe.clientIdentityChanged]:[]},o=e&&e.map((e=>function(e,t){let n=!1;const r={type:e.type,name:e.name,method:(...o)=>{try{e.method(...o)}catch{n||(n=!0,t.warn(ae.inspectorMethodError(r.type,r.name)))}}};return r}(e,t)));return o&&o.forEach((e=>{Object.prototype.hasOwnProperty.call(r,e.type)?r[e.type].push(e):t.warn(ae.invalidInspector(e.type,e.name))})),n.hasListeners=e=>r[e]&&r[e].length,n.onFlagUsed=(e,t,n)=>{r[Xe.flagUsed].length&&We((()=>{r[Xe.flagUsed].forEach((r=>r.method(e,t,n)))}))},n.onFlags=e=>{r[Xe.flagDetailsChanged].length&&We((()=>{r[Xe.flagDetailsChanged].forEach((t=>t.method(e)))}))},n.onFlagChanged=(e,t)=>{r[Xe.flagDetailChanged].length&&We((()=>{r[Xe.flagDetailChanged].forEach((n=>n.method(e,t)))}))},n.onIdentityChanged=e=>{r[Xe.clientIdentityChanged].length&&We((()=>{r[Xe.clientIdentityChanged].forEach((t=>t.method(e)))}))},n}};const{commonBasicLogger:Ye}=re,{checkContext:Qe,getContextKeys:et}=ke,{InspectorTypes:tt,InspectorManager:nt}=Ze,rt="change",ot="internal-change";var it={initialize:function(e,t,n,r,o){const i=n&&n.logger?n.logger:o&&o.logger&&o.logger.default||Ye("warn"),a=function(e){const t={},n={};return t.on=function(e,t,r){n[e]=n[e]||[],n[e]=n[e].concat({handler:t,context:r})},t.off=function(e,t,r){if(n[e])for(let o=0;o<n[e].length;o++)n[e][o].handler===t&&n[e][o].context===r&&(n[e]=n[e].slice(0,o).concat(n[e].slice(o+1)))},t.emit=function(e){if(!n[e])return;const t=n[e].slice(0);for(let e=0;e<t.length;e++)t[e].handler.apply(t[e].context,Array.prototype.slice.call(arguments,1))},t.getEvents=function(){return Object.keys(n)},t.getEventListenerCount=function(e){return n[e]?n[e].length:0},t.maybeReportError=function(t){t&&(n.error?this.emit("error",t):(e||console).error(t.message))},t}(i),s=function(e){let t=!1,n=!1,r=null,o=null;const i=new Promise((t=>{const n=()=>{e.off(De,n),t()};e.on(De,n)})).catch((()=>{}));return{getInitializationPromise:()=>o||(t?Promise.resolve():n?Promise.reject(r):(o=new Promise(((t,n)=>{const r=()=>{e.off(_e,r),t()},o=t=>{e.off(Ie,o),n(t)};e.on(_e,r),e.on(Ie,o)})),o)),getReadyPromise:()=>i,signalSuccess:()=>{t||n||(t=!0,e.emit(_e),e.emit(De))},signalFailure:o=>{t||n||(n=!0,r=o,e.emit(Ie,o),e.emit(De)),e.maybeReportError(o)}}}(a),c=de.validate(n,a,o,i),u=nt(c.inspectors,i),f=c.sendEvents;let d=e,p=c.hash;const v=function(e,t){const n={};let r=!1;const o=e=>{r||(r=!0,t.warn(ae.localStorageUnavailable(e)))};return n.isEnabled=()=>!!e,n.get=t=>new Promise((n=>{e?e.get(t).then(n).catch((e=>{o(e),n(void 0)})):n(void 0)})),n.set=(t,n)=>new Promise((r=>{e?e.set(t,n).then((()=>r(!0))).catch((e=>{o(e),r(!1)})):r(!1)})),n.clear=t=>new Promise((n=>{e?e.clear(t).then((()=>n(!0))).catch((e=>{o(e),n(!1)})):n(!1)})),n}(r.localStorage,i),g=ye(r,d,c),h=c.sendEvents&&!c.diagnosticOptOut,m=h?function(e){const t={diagnosticId:ze()};return e&&(t.sdkKeySuffix=e.length>6?e.substring(e.length-6):e),t}(d):null,y=h?function(e){let t,n,r,o;function i(e){t=e,n=0,r=0,o=[]}return i(e),{getProps:()=>({dataSinceDate:t,droppedEvents:n,eventsInLastBatch:r,streamInits:o}),setProps:e=>{t=e.dataSinceDate,n=e.droppedEvents||0,r=e.eventsInLastBatch||0,o=e.streamInits||[]},incrementDroppedEvents:()=>{n++},setEventsInLastBatch:e=>{r=e},recordStreamInit:(e,t,n)=>{const r={timestamp:e,failed:t,durationMillis:n};o.push(r)},reset:i}}((new Date).getTime()):null,b=h?function(e,t,n,r,o,i,a){const s=!!e.diagnosticUseCombinedEvent,c="ld:"+o+":$diagnostics",u=Ke(i.eventsUrl,"/events/diagnostic/"+o),l=i.diagnosticRecordingInterval,f=n;let d,p,v=!!i.streaming;const g={};function h(){return{sdk:b(),configuration:{customBaseURI:i.baseUrl!==Je.baseUrl.default,customStreamURI:i.streamUrl!==Je.streamUrl.default,customEventsURI:i.eventsUrl!==Je.eventsUrl.default,eventsCapacity:i.eventCapacity,eventsFlushIntervalMillis:i.flushInterval,reconnectTimeMillis:i.streamReconnectDelay,streamingDisabled:!v,allAttributesPrivate:!!i.allAttributesPrivate,diagnosticRecordingIntervalMillis:i.diagnosticRecordingInterval,usingSecureMode:!!i.hash,bootstrapMode:!!i.bootstrap,fetchGoalsDisabled:!i.fetchGoals,sendEventsOnlyForVariation:!!i.sendEventsOnlyForVariation},platform:e.diagnosticPlatformData}}function m(e){i.logger&&i.logger.debug(ae.debugPostingDiagnosticEvent(e)),r.sendEvents(e,u,!0).then((()=>{})).catch((()=>{}))}function y(){m(function(){const e=(new Date).getTime();let t={kind:s?"diagnostic-combined":"diagnostic",id:a,creationDate:e,...f.getProps()};return s&&(t={...t,...h()}),f.reset(e),t}()),p=setTimeout(y,l),d=(new Date).getTime(),s&&function(){if(t.isEnabled()){const e={...f.getProps()};t.set(c,JSON.stringify(e))}}()}function b(){const t={...e.diagnosticSdkData};return i.wrapperName&&(t.wrapperName=i.wrapperName),i.wrapperVersion&&(t.wrapperVersion=i.wrapperVersion),t}return g.start=()=>{s?function(e){if(!t.isEnabled())return e(!1);t.get(c).then((t=>{if(t)try{const e=JSON.parse(t);f.setProps(e),d=e.dataSinceDate}catch(e){}e(!0)})).catch((()=>{e(!1)}))}((e=>{if(e){const e=(d||0)+l,t=(new Date).getTime();t>=e?y():p=setTimeout(y,e-t)}else 0===Math.floor(4*Math.random())?y():p=setTimeout(y,l)})):(m({kind:"diagnostic-init",id:a,creationDate:f.getProps().dataSinceDate,...h()}),p=setTimeout(y,l))},g.stop=()=>{p&&clearTimeout(p)},g.setStreaming=e=>{v=e},g}(r,v,y,g,d,c,m):null,w=function(e,t,n,r){const o=t.streamUrl,i=t.logger,a={},s=Ae(o,"/eval/"+n),c=t.useReport,u=t.evaluationReasons,l=t.streamReconnectDelay,f=Ne(e,t);let d,p=!1,v=null,g=null,h=null,m=null,y=null,b=0;function w(e){if(e.status&&"number"==typeof e.status&&!Me(e.status))return S(),i.error(ae.unrecoverableStreamError(e)),void(g&&(clearTimeout(g),g=null));const t=function(){const e=(t=function(){const e=l*Math.pow(2,b);return e>3e4?3e4:e}(),t-Math.trunc(.5*Math.random()*t));var t;return b+=1,e}();p||(i.warn(ae.streamError(e,t)),p=!0),C(!1),S(),E(t)}function E(e){g||(e?g=setTimeout(k,e):k())}function k(){let r;g=null;let a="";const l={headers:f,readTimeoutMillis:3e5};if(e.eventSourceFactory){null!=m&&(a="h="+m),c?e.eventSourceAllowsReport?(r=s,l.method="REPORT",l.headers["Content-Type"]="application/json",l.body=JSON.stringify(h)):(r=Ae(o,"/ping/"+n),a=""):r=s+"/"+Ue(JSON.stringify(h)),l.headers=Fe(l.headers,t),u&&(a=a+(a?"&":"")+"withReasons=true"),r=r+(a?"?":"")+a,S(),i.info(ae.streamConnecting(r)),d=(new Date).getTime(),v=e.eventSourceFactory(r,l);for(const e in y)je(y,e)&&v.addEventListener(e,y[e]);v.onerror=w,v.onopen=()=>{b=0}}}function S(){v&&(i.info(ae.streamClosing()),v.close(),v=null)}function C(e){d&&r&&r.recordStreamInit(d,!e,(new Date).getTime()-d),d=null}return a.connect=function(e,t,n){h=e,m=t,y={};for(const e in n||{})y[e]=function(t){p=!1,C(!0),n[e]&&n[e](t)};E()},a.disconnect=function(){clearTimeout(g),g=null,S()},a.isConnected=function(){return!!(v&&e.eventSourceIsActive&&e.eventSourceIsActive(v))},a}(r,c,d,y),E=c.eventProcessor||function(e,t,n,r=null,o=null,i=null){const a={},s=i||ye(e,n,t),c=R.appendUrlPath(t.eventsUrl,"/events/bulk/"+n),u=function(){const e={};let t=0,n=0,r={},o={};return e.summarizeEvent=e=>{if("feature"===e.kind){const i=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),a=r[i];let s=o[e.key];s||(s=new Set,o[e.key]=s),function(e){return e.context?Se(e.context):e.contextKeys?Object.keys(e.contextKeys):[]}(e).forEach((e=>s.add(e))),a?a.count=a.count+1:r[i]={count:1,key:e.key,version:e.version,variation:e.variation,value:e.value,default:e.default},(0===t||e.creationDate<t)&&(t=e.creationDate),e.creationDate>n&&(n=e.creationDate)}},e.getSummary=()=>{const e={};let i=!0;for(const t of Object.values(r)){let n=e[t.key];n||(n={default:t.default,counters:[],contextKinds:[...o[t.key]]},e[t.key]=n);const r={value:t.value,count:t.count};void 0!==t.variation&&null!==t.variation&&(r.variation=t.variation),void 0!==t.version&&null!==t.version?r.version=t.version:r.unknown=!0,n.counters.push(r),i=!1}return i?null:{startDate:t,endDate:n,features:e}},e.clearSummary=()=>{t=0,n=0,r={},o={}},e}(),f=function(e){const t={},n=e.allAttributesPrivate,r=e.privateAttributes||[],o=["key","kind","_meta","anonymous"],i=["name","ip","firstName","lastName","email","avatar","country"],a=e=>{if("object"!=typeof e||null===e||Array.isArray(e))return;const{cloned:t,excluded:i}=Le.cloneExcluding(e,(e=>(n?Object.keys(e):[...r,...e._meta&&e._meta.privateAttributes||[]]).filter((e=>!o.some((t=>Le.compare(e,t))))))(e));return t.key=String(t.key),i.length&&(t._meta||(t._meta={}),t._meta.redactedAttributes=i),t._meta&&(delete t._meta.privateAttributes,0===Object.keys(t._meta).length&&delete t._meta),void 0!==t.anonymous&&(t.anonymous=!!t.anonymous),t};return t.filter=e=>void 0===e.kind||null===e.kind?a((e=>{const t={...e.custom||{},kind:"user",key:e.key};void 0!==e.anonymous&&(t.anonymous=!!e.anonymous);for(const n of i)delete t[n],void 0!==e[n]&&null!==e[n]&&(t[n]=String(e[n]));return void 0!==e.privateAttributeNames&&null!==e.privateAttributeNames&&(t._meta=t._meta||{},t._meta.privateAttributes=e.privateAttributeNames.map((e=>e.startsWith("/")?Le.literalToReference(e):e))),t})(e)):"multi"===e.kind?(e=>{const t={kind:e.kind},n=Object.keys(e);for(const r of n)if("kind"!==r){const n=a(e[r]);n&&(t[r]=n)}return t})(e):a(e),t}(t),d=t.samplingInterval,p=t.eventCapacity,v=t.flushInterval,g=t.logger;let h,m=[],y=0,b=!1,w=!1;function E(){return 0===d||0===Math.floor(Math.random()*d)}function k(e){m.length<p?(m.push(e),w=!1):(w||(w=!0,g.warn(ae.eventCapacityExceeded())),r&&r.incrementDroppedEvents())}return a.enqueue=function(e){if(b)return;let t=!1,n=!1;var r;if(u.summarizeEvent(e),"feature"===e.kind?E()&&(t=!!e.trackEvents,n=!!(r=e).debugEventsUntilDate&&r.debugEventsUntilDate>y&&r.debugEventsUntilDate>(new Date).getTime()):t=E(),t&&k(function(e){const t=R.extend({},e);return"identify"===e.kind?t.context=f.filter(e.context):(t.contextKeys=Pe(e.context,g),delete t.context),"feature"===e.kind&&(delete t.trackEvents,delete t.debugEventsUntilDate),t}(e)),n){const t=R.extend({},e,{kind:"debug"});t.context=f.filter(t.context),delete t.trackEvents,delete t.debugEventsUntilDate,k(t)}},a.flush=function(){if(b)return Promise.resolve();const e=m,t=u.getSummary();return u.clearSummary(),t&&(t.kind="summary",e.push(t)),r&&r.setEventsInLastBatch(e.length),0===e.length?Promise.resolve():(m=[],g.debug(ae.debugPostingEvents(e.length)),s.sendEvents(e,c).then((e=>{const t=e&&e[0];t&&(t.serverTime&&(y=t.serverTime),l.isHttpErrorRecoverable(t.status)||(b=!0),t.status>=400&&R.onNextTick((()=>{o.maybeReportError(new l.LDUnexpectedResponseError(ae.httpErrorMessage(t.status,"event posting","some events were dropped")))})))})))},a.start=function(){const e=()=>{a.flush(),h=setTimeout(e,v)};h=setTimeout(e,v)},a.stop=function(){clearTimeout(h)},a}(r,c,d,y,a,g),k=function(e,t,n){const r=t.baseUrl,o=t.useReport,i=t.evaluationReasons,a=t.logger,s={},c={};function u(n,r){if(!e.httpRequest)return new Promise(((e,t)=>{t(new l.LDFlagFetchError(ae.httpUnavailable()))}));const o=r?"REPORT":"GET",i=Be(e,t);r&&(i["Content-Type"]=He);let a=c[n];a||(a=function(e){let t,n,r,o;const i={addPromise:(i,a)=>{t=i,n&&n(),n=a,i.then((n=>{t===i&&(r(n),e&&e())}),(n=>{t===i&&(o(n),e&&e())}))}};return i.resultPromise=new Promise(((e,t)=>{r=e,o=t})),i}((()=>{delete c[n]})),c[n]=a);const s=e.httpRequest(o,n,qe(i,t),r),u=s.promise.then((e=>{if(200===e.status){if(e.header("content-type")&&e.header("content-type").substring(0,16)===He)return JSON.parse(e.body);{const t=ae.invalidContentType(e.header("content-type")||"");return Promise.reject(new l.LDFlagFetchError(t))}}return Promise.reject(function(e){return 404===e.status?new l.LDInvalidEnvironmentIdError(ae.environmentNotFound()):new l.LDFlagFetchError(ae.errorFetchingFlags(e.statusText||String(e.status)))}(e))}),(e=>Promise.reject(new l.LDFlagFetchError(ae.networkError(e)))));return a.addPromise(u,(()=>{s.cancel&&s.cancel()})),a.resultPromise}return s.fetchJSON=function(e){return u(R.appendUrlPath(r,e),null)},s.fetchFlagSettings=function(e,t){let s,c,l,f="";return o?(c=[r,"/sdk/evalx/",n,"/context"].join(""),l=JSON.stringify(e)):(s=R.base64URLEncode(JSON.stringify(e)),c=[r,"/sdk/evalx/",n,"/contexts/",s].join("")),t&&(f="h="+t),i&&(f=f+(f?"&":"")+"withReasons=true"),c=c+(f?"?":"")+f,a.debug(ae.debugPolling(c)),u(c,l)},s}(r,c,d);let S,C,x,O={},T=c.streaming,L=!1,P=!1,D=!0;const _=c.stateProvider,I=function(e,t){const n={};let r;return n.setContext=function(e){r=R.sanitizeContext(e),r&&t&&t(R.clone(r))},n.getContext=function(){return r?R.clone(r):null},n}(0,(function(e){(function(e){_||e&&j({kind:"identify",context:e,creationDate:(new Date).getTime()})})(e),u.hasListeners(tt.clientIdentityChanged)&&u.onIdentityChanged(I.getContext())})),A=new $e(v),U=v.isEnabled()?function(e,t,n,r){const o={};function i(){let e="";const o=r.getContext();return o&&(e=n||R.btoa(JSON.stringify(o))),"ld:"+t+":"+e}return o.loadFlags=()=>e.get(i()).then((e=>{if(null==e)return null;try{let t=JSON.parse(e);if(t){const e=t.$schema;void 0===e||e<1?t=R.transformValuesToVersionedValues(t):delete t.$schema}return t}catch(e){return o.clearFlags().then((()=>null))}})),o.saveFlags=t=>{const n=R.extend({},t,{$schema:1});return e.set(i(),JSON.stringify(n))},o.clearFlags=()=>e.clear(i()),o}(v,d,p,I):null;function j(e){d&&(_&&_.enqueueEvent&&_.enqueueEvent(e)||(e.context?(D=!1,!f||P||r.isDoNotTrack()||(i.debug(ae.debugEnqueueingEvent(e.kind)),E.enqueue(e))):D&&(i.warn(ae.eventWithoutContext()),D=!1)))}function N(e,t){u.hasListeners(tt.flagDetailChanged)&&u.onFlagChanged(e.key,H(t))}function F(){u.hasListeners(tt.flagDetailsChanged)&&u.onFlags(Object.entries(O).map((([e,t])=>({key:e,detail:H(t)}))).reduce(((e,t)=>(e[t.key]=t.detail,e)),{}))}function M(e,t,n,r){const o=I.getContext(),i=new Date,a={kind:"feature",key:e,context:o,value:t?t.value:null,variation:t?t.variationIndex:null,default:n,creationDate:i.getTime()},s=O[e];s&&(a.version=s.flagVersion?s.flagVersion:s.version,a.trackEvents=s.trackEvents,a.debugEventsUntilDate=s.debugEventsUntilDate),(r||s&&s.trackReason)&&t&&(a.reason=t.reason),j(a)}function q(e){return Qe(e,!1)?Promise.resolve(e):Promise.reject(new l.LDInvalidUserError(ae.invalidContext()))}function B(e,t,n,r,o){let i;if(O&&R.objectHasOwnProperty(O,e)&&O[e]&&!O[e].deleted){const n=O[e];i=H(n),null!==n.value&&void 0!==n.value||(i.value=t)}else i={value:t,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}};return n&&M(e,i,t,r),o||function(e,t){u.hasListeners(tt.flagUsed)&&u.onFlagUsed(e,t,I.getContext())}(e,i),i}function H(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function V(){if(C=!0,!I.getContext())return;const e=e=>{try{return JSON.parse(e)}catch(e){return void a.maybeReportError(new l.LDInvalidDataError(ae.invalidData()))}};w.connect(I.getContext(),p,{ping:function(){i.debug(ae.debugStreamPing());const e=I.getContext();k.fetchFlagSettings(e,p).then((t=>{R.deepEquals(e,I.getContext())&&$(t||{})})).catch((e=>{a.maybeReportError(new l.LDFlagFetchError(ae.errorFetchingFlags(e)))}))},put:function(t){const n=e(t.data);n&&(i.debug(ae.debugStreamPut()),$(n))},patch:function(t){const n=e(t.data);if(!n)return;const r=O[n.key];if(!r||!r.version||!n.version||r.version<n.version){i.debug(ae.debugStreamPatch(n.key));const e={},t=R.extend({},n);delete t.key,O[n.key]=t;const o=H(t);e[n.key]=r?{previous:r.value,current:o}:{current:o},z(e),N(n,t)}else i.debug(ae.debugStreamPatchIgnored(n.key))},delete:function(t){const n=e(t.data);if(n)if(!O[n.key]||O[n.key].version<n.version){i.debug(ae.debugStreamDelete(n.key));const e={};O[n.key]&&!O[n.key].deleted&&(e[n.key]={previous:O[n.key].value}),O[n.key]={version:n.version,deleted:!0},N(n,O[n.key]),z(e)}else i.debug(ae.debugStreamDeleteIgnored(n.key))}})}function G(){C&&(w.disconnect(),C=!1)}function $(e){const t={};if(!e)return Promise.resolve();for(const n in O)R.objectHasOwnProperty(O,n)&&O[n]&&(e[n]&&!R.deepEquals(e[n].value,O[n].value)?t[n]={previous:O[n].value,current:H(e[n])}:e[n]&&!e[n].deleted||(t[n]={previous:O[n].value}));for(const n in e)R.objectHasOwnProperty(e,n)&&e[n]&&(!O[n]||O[n].deleted)&&(t[n]={current:H(e[n])});return O={...e},F(),z(t).catch((()=>{}))}function z(e){const t=Object.keys(e);if(t.length>0){const n={};t.forEach((t=>{const r=e[t].current,o=r?r.value:void 0,i=e[t].previous;a.emit(rt+":"+t,o,i),n[t]=r?{current:o,previous:i}:{previous:i}})),a.emit(rt,n),a.emit(ot,O),c.sendEventsOnlyForVariation||_||t.forEach((t=>{M(t,e[t].current)}))}return S&&U?U.saveFlags(O):Promise.resolve()}function J(){const e=T||x&&void 0===T;e&&!C?V():!e&&C&&G(),b&&b.setStreaming(e)}function K(e){return e===rt||e.substr(0,7)===rt+":"}if("string"==typeof c.bootstrap&&"LOCALSTORAGE"===c.bootstrap.toUpperCase()&&(U?S=!0:i.warn(ae.localStorageUnavailable())),"object"==typeof c.bootstrap&&(O=function(e){const t=Object.keys(e),n="$flagsState",r="$valid",o=e[n];!o&&t.length&&i.warn(ae.bootstrapOldFormat()),!1===e[r]&&i.warn(ae.bootstrapInvalid());const a={};return t.forEach((t=>{if(t!==n&&t!==r){let n={value:e[t]};o&&o[t]?n=R.extend(n,o[t]):n.version=0,a[t]=n}})),a}(c.bootstrap)),_){const e=_.getInitialState();e?W(e):_.on("init",W),_.on("update",(function(e){e.context&&I.setContext(e.context),e.flags&&$(e.flags)}))}else(e?A.processContext(t).then(q).then((e=>(I.setContext(e),"object"==typeof c.bootstrap?X():S?U.loadFlags().then((e=>null==e?(O={},k.fetchFlagSettings(I.getContext(),p).then((e=>$(e||{}))).then(X).catch((e=>{Z(new l.LDFlagFetchError(ae.errorFetchingFlags(e)))}))):(O=e,R.onNextTick(X),k.fetchFlagSettings(I.getContext(),p).then((e=>$(e))).catch((e=>a.maybeReportError(e)))))):k.fetchFlagSettings(I.getContext(),p).then((e=>{O=e||{},F(),X()})).catch((e=>{O={},Z(e)}))))):Promise.reject(new l.LDInvalidEnvironmentIdError(ae.environmentNotSpecified()))).catch(Z);function W(e){d=e.environment,I.setContext(e.context),O={...e.flags},R.onNextTick(X)}function X(){i.info(ae.clientInitialized()),L=!0,J(),s.signalSuccess()}function Z(e){s.signalFailure(e)}const Y={waitForInitialization:()=>s.getInitializationPromise(),waitUntilReady:()=>s.getReadyPromise(),identify:function(e,t,n){if(P)return R.wrapPromiseCallback(Promise.resolve({}),n);if(_)return i.warn(ae.identifyDisabled()),R.wrapPromiseCallback(Promise.resolve(R.transformVersionedValuesToValues(O)),n);const r=S&&U?U.clearFlags():Promise.resolve();return R.wrapPromiseCallback(r.then((()=>A.processContext(e))).then(q).then((e=>k.fetchFlagSettings(e,t).then((n=>{const r=R.transformVersionedValuesToValues(n);return I.setContext(e),p=t,n?$(n).then((()=>r)):r})))).then((e=>(C&&V(),e))).catch((e=>(a.maybeReportError(e),Promise.reject(e)))),n)},getContext:function(){return I.getContext()},variation:function(e,t){return B(e,t,!0,!1,!1).value},variationDetail:function(e,t){return B(e,t,!0,!0,!1)},track:function(e,t,n){if("string"!=typeof e)return void a.maybeReportError(new l.LDInvalidEventKeyError(ae.unknownCustomEventKey(e)));r.customEventFilter&&!r.customEventFilter(e)&&i.warn(ae.unknownCustomEventKey(e));const o=I.getContext(),s={kind:"custom",key:e,context:o,url:r.getCurrentUrl(),creationDate:(new Date).getTime()};o&&o.anonymous&&(s.contextKind=o.anonymous?"anonymousUser":"user"),null!=t&&(s.data=t),null!=n&&(s.metricValue=n),j(s)},on:function(e,t,n){K(e)?(x=!0,L&&J(),a.on(e,t,n)):a.on(...arguments)},off:function(e){if(a.off(...arguments),K(e)){let e=!1;a.getEvents().forEach((t=>{K(t)&&a.getEventListenerCount(t)>0&&(e=!0)})),e||(x=!1,C&&void 0===T&&G())}},setStreaming:function(e){const t=null===e?void 0:e;t!==T&&(T=t,J())},flush:function(e){return R.wrapPromiseCallback(f?E.flush():Promise.resolve(),e)},allFlags:function(){const e={};if(!O)return e;for(const t in O)R.objectHasOwnProperty(O,t)&&!O[t].deleted&&(e[t]=B(t,null,!c.sendEventsOnlyForVariation,!1,!0).value);return e},close:function(e){if(P)return R.wrapPromiseCallback(Promise.resolve(),e);const t=()=>{P=!0,O={}},n=Promise.resolve().then((()=>{if(G(),b&&b.stop(),f)return E.stop(),E.flush()})).then(t).catch(t);return R.wrapPromiseCallback(n,e)}};return{client:Y,options:c,emitter:a,ident:I,logger:i,requestor:k,start:function(){f&&(b&&b.start(),E.start())},enqueueEvent:j,getFlagsInternal:function(){return O},getEnvironmentId:()=>d,internalChangeEventName:ot}},commonBasicLogger:Ye,errors:l,messages:ae,utils:R,getContextKeys:et},at=it.initialize,st=it.errors;function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft={promise:Promise.resolve({status:200,header:function(){return null},body:null})},dt=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};function pt(e,t,n,r){var o,i,a=("substring"!==e.kind&&"regex"!==e.kind||!r.includes("/")?t.replace(r,""):t).replace(n,"");switch(e.kind){case"exact":i=t,o=new RegExp("^"+dt(e.url)+"/?$");break;case"canonical":i=a,o=new RegExp("^"+dt(e.url)+"/?$");break;case"substring":i=a,o=new RegExp(".*"+dt(e.substring)+".*$");break;case"regex":i=a,o=new RegExp(e.pattern);break;default:return!1}return o.test(i)}function vt(e,t){for(var n={},r=null,o=[],i=0;i<e.length;i++)for(var a=e[i],s=a.urls||[],c=0;c<s.length;c++)if(pt(s[c],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?t("pageview",a):(o.push(a),t("click_pageview",a));break}return o.length>0&&(r=function(e){for(var n=function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=e.target,i=t[r],a=i.selector,s=document.querySelectorAll(a);o&&s.length>0;){for(var c=0;c<s.length;c++)o===s[c]&&n.push(i);o=o.parentNode}return n}(e,o),r=0;r<n.length;r++)t("click",n[r])},document.addEventListener("click",r)),n.dispose=function(){document.removeEventListener("click",r)},n}var gt=300,ht="goalsReady",mt={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function yt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t,n={userAgentHeaderName:"X-LaunchDarkly-User-Agent",synchronousFlush:!1};if(window.XMLHttpRequest){var r=e&&e.disableSyncEventPost;n.httpRequest=function(e,t,o,i){var a=n.synchronousFlush&!r;return n.synchronousFlush=!1,function(e,t,n,r,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;if(e){var t=e.match(/Chrom(e|ium)\/([0-9]+)\./);if(t)return parseInt(t[2],10)<73}return!0}())return ft;var i=new window.XMLHttpRequest;for(var a in i.open(e,t,!o),n||{})Object.prototype.hasOwnProperty.call(n,a)&&i.setRequestHeader(a,n[a]);if(o){try{i.send(r)}catch(e){}return ft}var s,c=new Promise((function(e,t){i.addEventListener("load",(function(){s||e({status:i.status,header:function(e){return i.getResponseHeader(e)},body:i.responseText})})),i.addEventListener("error",(function(){s||t(new Error)})),i.send(r)}));return{promise:c,cancel:function(){s=!0,i.abort()}}}(e,t,o,i,a)}}n.httpAllowsPost=function(){return void 0===t&&(t=!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest),t},n.httpFallbackPing=function(e){(new window.Image).src=e};var o,i=e&&e.eventUrlTransformer;n.getCurrentUrl=function(){return i?i(window.location.href):window.location.href},n.isDoNotTrack=function(){var e;return 1===(e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack)||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(n.localStorage={get:function(e){return new Promise((function(t){t(window.localStorage.getItem(e))}))},set:function(e,t){return new Promise((function(n){window.localStorage.setItem(e,t),n()}))},clear:function(e){return new Promise((function(t){window.localStorage.removeItem(e),t()}))}})}catch(e){n.localStorage=null}if(e&&e.useReport&&"function"==typeof window.EventSourcePolyfill&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(n.eventSourceAllowsReport=!0,o=window.EventSourcePolyfill):(n.eventSourceAllowsReport=!1,o=window.EventSource),window.EventSource){var a=3e5;n.eventSourceFactory=function(e,t){var n=ut(ut({},{heartbeatTimeout:a,silentTimeout:a,skipDefaultHeaders:!0}),t);return new o(e,n)},n.eventSourceIsActive=function(e){return e.readyState===window.EventSource.OPEN||e.readyState===window.EventSource.CONNECTING}}return n.userAgent="JSClient",n.version="3.1.4",n.diagnosticSdkData={name:"js-client-sdk",version:"3.1.4"},n.diagnosticPlatformData={name:"JS"},n.diagnosticUseCombinedEvent=!0,n}(n),o=at(e,t,n,r,mt),i=o.client,a=o.options,s=o.emitter,c=new Promise((function(e){var t=s.on(ht,(function(){s.off(ht,t),e()}))}));i.waitUntilGoalsReady=function(){return c},a.fetchGoals?function(e,t){var n,r;function o(){r&&r.dispose(),n&&n.length&&(r=vt(n,i))}function i(t,n){var r=e.ident.getContext(),o={kind:t,key:n.key,data:null,url:window.location.href,creationDate:(new Date).getTime(),context:r};return"click"===t&&(o.selector=n.selector),e.enqueueEvent(o)}e.requestor.fetchJSON("/sdk/goals/"+e.getEnvironmentId()).then((function(e){e&&e.length>0&&(r=vt(n=e,i),function(e,t){var n,r=window.location.href;function o(){(n=window.location.href)!==r&&(r=n,t())}!function e(t,n){t(),setTimeout((function(){e(t,n)}),n)}(o,e),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}(gt,o)),t()})).catch((function(n){e.emitter.maybeReportError(new st.LDUnexpectedResponseError((n&&n.message,n.message))),t()}))}(o,(function(){return s.emit(ht)})):s.emit(ht),"complete"!==document.readyState?window.addEventListener("load",o.start):o.start();var u=function(){r.synchronousFlush=!0,i.flush().catch((function(){})),r.synchronousFlush=!1};return document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&u()})),window.addEventListener("pagehide",u),i}},360:(e,t,n)=>{n.d(t,{Z:()=>o});var r="reactjs-heap";const o={initialize:function(e){if(!e)throw new Error("You need to provide your Heap Analytics ID.");if(document&&!document.getElementById(r)){var t=document.createElement("script");t.innerHTML=function(e){return'\n  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};\n  heap.load("'+e+'");\n'}(e),t.id=r,t.async=!0,document.body.appendChild(t)}}}}}]);